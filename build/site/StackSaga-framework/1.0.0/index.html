<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
<!--    <meta name="description" content="stack saga is a ecosystem as well as a framework to implement saga orchestration pattern with for spring boot. The framework provides a spring boot starter library to implement and a dashboard to manipulate all the transactions.">-->
    <meta name="author" content="Mafei (Tharindu Kalhara)">
    <title>Introduction To Microservice. :: StackSAGA Docs</title>
    <meta name="page-spec" content="StackSaga-framework::index.adoc">
    <meta name="description" content="Stacksaga Introduction To Microservice">
    <meta name="keywords" content="stacksaga, stacksaga doc, stacksaga framework, stacksaga introduction, spring boot microservices">
    <meta name="generator" content="Antora 3.1.7">
    <link rel="next" href="architecture/saga-architecture.html">
<link rel="stylesheet" href="../../_/css/site.css">
<link rel="stylesheet" href="../../_/css/icon.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><script async src="https://www.googletagmanager.com/gtag/js?id=[object Object]"></script>
<script>function gtag() {
    dataLayer.push(arguments)
};window.dataLayer = window.dataLayer || [];
gtag('js', new Date());
gtag('config', '[object Object]')</script>
<script src="https://kit.fontawesome.com/0cc2c17262.js" crossorigin="anonymous"></script>
<link rel="icon" href="../../_/img/fev/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" sizes="180x180" href="../../_/img/fev/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../_/img/fev/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../_/img/fev/favicon-16x16.png">  </head>
  <body class="article">
<header class="header">
    <nav class="navbar">
        <div class="navbar-brand">
            <a class="navbar-item logo" title="Asciidoctor" href="https://www.stacksaga.org"><img
                    src="../../_/img/stack-saga-icon.svg" alt="Asciidoctor" width="48"></a>
            <a class="navbar-item title" href="../..">StackSAGA Docs</a>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
            <div class="navbar-end">

                <a class="navbar-item" href="https://github.com/asciidoctor" target="_blank" rel="noopener">
                    <span class="icon"><img src="../../_/img/octicons-16.svg#view-mark-github"></span>
                </a>
            </div>
        </div>
    </nav>
</header>
<div class="body">
<div class="nav-container">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active is-loading" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" title="Toggle expand/collapse all"></button>
    <h3 class="title"><a href="index.html">StackSaga Framework</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-url" data-depth="1">
    <a class="nav-link" href="index.html">Introduction To Microservice</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><strong class="green">StackSaga Architecture</strong></span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture/saga-architecture.html">Introduction to the Saga Design Pattern</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture/introduction-to-stacksaga.html">Introduction to StackSaga</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture/key_steps_of_ecosystem.html">Key Steps of ecosystem in High-Level</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture/SEC.html">Saga execution coordinator. (SEC)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture/event_store.html">Event Store</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture/aggregator.html">Saga Aggregator.</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture/executor_architecture.html">Saga Executors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture/how_executors_behave_in_the_application.html">Aggregator Vs Executors.</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture/aggregator_versioning.html">Aggregator Versioning</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture/version_casting_architecture.html">Aggregator Version Casting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture/dual_consistency_problem_of_sec_in_microservice.html">Dual-Consistency problem of SEC in microservice.</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture/replay-transaction.html">Transaction Replay.</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture/stack_saga_transaction_type.html">StackSaga Transaction Types</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><strong class="green">StackSaga Core</strong></span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/create-aggregator.html">Creating Aggregator Class</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/saga_serializable.html">Creating SagaSerializable Class for Aggregator</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/aggregator_key_gen_custom_implementation.html">Aggregator KeyGen</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/aggregator_mapper_implementation.html">Custom Aggregator Mapper</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/complex_aggrgator.html">Full Aggregator implementation.</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/aggregator_serialization.html">Aggregator Serialization And Deserialization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/aggregator_casting.html">Aggregator&#8217;s Event Casting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/saga_executors.html">Saga Executors.</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/retryable_executor_exception.html">RetryableExecutorException</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/non_retryable_executor_exception.html">NonRetryableExecutorException</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/usage_of_exceptions.html">Usage of Executors[Q&amp;C] With Exceptions </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/saga_exception_annotation.html">@SagaException Annotation </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/saga_revert_hint_store.html">RevertHintStore</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/saga_event_handler.html">Saga Execution Event Listener </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/uncommitted_data_listener.html">UncommittedDataListener</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/saga_template.html">SagaTemplate&lt;A&gt;</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/custom_thread_pool_configuration.html">Custom Thread-pool configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/stacksaga_in_kubernetes.html">Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><strong class="green">Configuration Properties</strong></span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/core-configuration-properties.html">Core Configuration Properties</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/sql-datasource-configuration-properties.html">JDBC Datasource Configuration Properties</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/kubernetes-support-configuration-properties.html">Kubernetes Support Configuration Properties</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/eureka-support-configuration-properties.html">Eureka Support Configuration Properties</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="framework/admin-configuration-properties.html">Admin Configuration Properties</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><strong class="green">Admin Dashboard</strong></span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="admin/stacksaga_admin.html">StackSaga Admin Dashboard</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><strong class="green">Demo Implementations</strong></span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="quick-examples/quick-start.html">Quick Start</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="quick-examples/stacksaga-demo.html">StackSaga Demo (Core concept practice)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="quick-examples/stackSaga-demo-with-docker-and-docker-compose.html">Migrate To Docker Environment.</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="quick-examples/k8s_with_k8s/migration-to-kubernetes.html">Migrate To Kubernetes Environment</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
  <script>
;(function () {
  var panel = document.querySelector('.nav-panel-menu')
  var page
  var hash = window.location.hash
  if (hash) {
    if (~hash.indexOf('%')) hash = decodeURIComponent(hash)
    if (~hash.indexOf('"')) hash = hash.replace(/(?=")/g, '\\')
    var link = panel.querySelector('.nav-link[href="' + hash + '"]')
    if (link) page = link.parentNode
    else if ((page = panel.querySelector('.is-current-url'))) page.classList.add('is-provisional')
  } else {
    page = panel.querySelector('.is-current-url')
  }
  if (page) {
    var ancestor = page
    while ((ancestor = ancestor.parentNode) && ancestor !== panel) {
      if (ancestor.className === 'nav-item') ancestor.classList.add('is-current-path', 'is-active')
    }
    page.classList.add('is-current-page', 'is-active')
    if (panel.scrollHeight > panel.clientHeight) {
      var panelRect = panel.getBoundingClientRect()
      var linkRect = page.querySelector('.nav-link').getBoundingClientRect()
      panel.scrollTop += Math.round(linkRect.top - panelRect.top - (panelRect.height - linkRect.height) * 0.5)
    }
  } else {
    panel.scrollTop = 0
  }
  panel.classList.remove('is-loading')
})()
  </script>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">StackSaga Framework</span>
    <span class="version">1.0.0 SNAPSHOT</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../StackSaga-admin/2.5/index.html">StackSaga Admin</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../StackSaga-admin/2.5/index.html">2.5-beta.1</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">StackSaga Framework</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1.0.0 SNAPSHOT</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">StackSaga Framework</a></li>
    <li><a href="index.html">Introduction To Microservice</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Introduction To Microservice.</h1>
<div class="sect1">
<h2 id="_microservice_architecture"><a class="anchor" href="#_microservice_architecture"></a>Microservice Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before dive in to the framework, let&#8217;s have the basic idea of microservice architecture.
A microservice' architecture consists of a collection of small, autonomous services.
Each service is self-contained and should implement a single business capability within a bounded context.
A bounded context is a natural division within a business and provides an explicit boundary within which a domain model exists.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/stacksaga-diagram-Microservice-architecture-style.drawio.svg" alt="stacksaga diagram  microservice architecture style"></span></p>
</div>
<div class="paragraph">
<p><a href="https://spring.io/microservices">Read more through spring microservices.</a></p>
</div>
<div class="sect2">
<h3 id="_key_characteristics_of_microservices"><a class="anchor" href="#_key_characteristics_of_microservices"></a>Key characteristics of microservices</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Modularity</strong>: Each microservice is a self-contained unit that can be developed, deployed, and scaled independently.
This modularity allows for easier development and maintenance of complex systems.</p>
</li>
<li>
<p><strong>Scalability</strong>: Since each service is independent, it can be scaled horizontally or vertically based on its specific requirements.
This allows for better resource utilization and improved performance.</p>
</li>
<li>
<p><strong>Resilience</strong>: Microservices are designed to be fault-tolerant and resilient.
If one service fails, it does not necessarily affect the entire application, as other services can continue to function independently.</p>
</li>
<li>
<p><strong>Flexibility</strong>: Microservices allow for flexibility in technology choices.
Each service can be developed using the most suitable programming language, framework, or database for its requirements.</p>
</li>
<li>
<p><strong>Decentralized Data Management</strong>: Instead of a single centralized database, each microservice can have its own database or data store.
This allows for better isolation of data and reduces the risk of data corruption or loss.</p>
</li>
<li>
<p><strong>Continuous Deployment</strong>: Microservices enable continuous deployment and delivery practices, as each service can be deployed independently without affecting others.
This allows for faster release cycles and quicker time-to-market.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_database_per_service_pattern"><a class="anchor" href="#_database_per_service_pattern"></a>Database Per Service Pattern</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the benefits of microservice architecture is that it lets us choose the technology stack per service.
For instance, we can decide to use a relational database for service A and opt for a NoSQL database for service B. This model lets the services manage domain data independently on a data store that best suites its data types and schema.
Further, it also lets the service scale its datastore on-demand and insulates it from the failures of other services.
However, at times a transaction can span across multiple services, and ensuring data consistency across the service database is a challenge.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/stacksaga-diagram-Microservice-architecture-style-database-per-service.drawio.svg" alt="stacksaga diagram  microservice architecture style database per service"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migration_to_microservices_architecture"><a class="anchor" href="#_migration_to_microservices_architecture"></a>Migration to microservices architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="_images/stacksaga-diagram-monolithic-architecture-vs-microservices-architecture.drawio.svg" alt="stacksaga diagram monolithic architecture vs microservices architecture"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_distributed_transaction"><a class="anchor" href="#_distributed_transaction"></a>Distributed Transaction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the microservice architecture, a distributed transaction refers to a transaction that spans multiple microservices.
Traditional monolithic applications often use a single database and ACID (Atomicity, Consistency, Isolation, Durability) transactions to ensure data integrity within a single transaction.
However, in the microservice environment, each microservice typically has its own database or data store, and transactions may need to span multiple services.</p>
</div>
<div class="paragraph">
<p>As an example, Just imagine that there is an e-commerce application that makes online orders, and it has been implemented with microservice architecture.
In general, the following microservices can be involved to make the entire order placing request.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>order-service</p>
<div class="ulist">
<ul>
<li>
<p>initialize the order.</p>
</li>
<li>
<p>update the order status</p>
</li>
</ul>
</div>
</li>
<li>
<p>payment-service</p>
<div class="ulist">
<ul>
<li>
<p>make pre-auth</p>
</li>
<li>
<p>make real payment</p>
</li>
</ul>
</div>
</li>
<li>
<p>Stock-service</p>
<div class="ulist">
<ul>
<li>
<p>update the inventory, and so on.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Even though the entire transaction is pace-order, that transaction has many sub atomic-transactions.
Those transactions have been distributed along with many microservices.
Each service performs a signal local transaction to implement the individual functionalities.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/stacksaga-diagram-distributed-transaction.drawio.svg" alt="distributed transaction"></span></p>
</div>
<div class="paragraph">
<p>To make a successful transaction, all 4 atomic-transactions (three microservices) must be completed.
If any of the microservices fails to complete one of the local transactions, all the completed atomic transactions until where the failure happened should be rolled back to ensure data integrity.</p>
</div>
<div class="paragraph">
<p>As per the example, if the <strong>make-payment</strong> atomic transaction (transaction-4) is failed, all other successfully executed transactions should be rolled back to ensure data integrity.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_challenges_of_distributed_transaction"><a class="anchor" href="#_challenges_of_distributed_transaction"></a>Challenges of Distributed Transaction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Distributed transactions in a microservice architecture pose two key challenges.
The first one is maintaining ACID.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Atomicity across services</strong> (maintaining ACID)</p>
<div class="paragraph">
<p>To ensure the correctness of a transaction, it must be an atomic, consistent, isolated, and durable (ACID).
The atomicity ensures that all or none of the steps of a transaction should complete.
Consistency takes data from one valid state to another valid state.
Isolation guarantees that concurrent transactions should produce the same result that sequentially transactions would have produced.
Lastly, durability means that committed transactions remain committed irrespective of any type of system failure.
In a distributed transaction scenario, as the transaction spans several services, it always remains a key concern to ensure ACID.</p>
</div>
</li>
<li>
<p><strong>Managing the transaction isolation level.</strong></p>
<div class="paragraph">
<p>It specifies the amount of data that is visible in a transaction when the other services access the same data simultaneously.
In other words, if one object in one of the microservices is persisted in the database while another request reads the data, should the service return the old or new data?</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the next section, let&#8217;s see what are the solutions that can be used to overcome this challenge.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="next"><a href="architecture/saga-architecture.html">Introduction to the Saga Design Pattern</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footer-main">
    <figure class="footer-brand">
      <a class="logo" href="https://asciidoctor.org"><img src="../../_/img/stack-saga-icon.svg" alt="Asciidoctor" width="48"></a>
      <figcaption class="footer-brand-name"><a href="https://asciidoctor.org">StackSAGA</a></figcaption>
    </figure>
    <ul class="footer-brand-links">
      <li><a href="https://asciidoctor.org" target="_blank" rel="noopener">Home</a></li>
      <li><a href="../..">Docs</a></li>
      <li><a href="https://github.com/asciidoctor" target="_blank" rel="noopener">Source</a></li>
      <li><a href="http://discuss.asciidoctor.org" target="_blank" rel="noopener">Discuss</a></li>
    </ul>
  </div>
  <div class="footer-legal">
    <p>Copyright Â© 2024 Dan Allen, Sarah White, and individual Asciidoctor contributors. Except where noted, the content is licensed under a Creative Commons Attribution 4.0 International (CC BY 4.0) license.</p>
    <p>The UI for this site is based on the default Antora UI and is licensed under the MPL-2.0 license. Several icons are imported from <a href="https://primer.style/octicons/" target="_blank" rel="noopener">Octicons</a> and are licensed under the MIT license.</p>
    <p>AsciiDoc is a Trademark of the Eclipse Foundation, Inc.</p>
  </div>
  <div class="footer-thanks">
    <p>Thanks to our <a href="https://asciidoctor.org/supporters/" target="_blank" rel="noopener">backers</a> and <a href="https://asciidoctor.org/contributors/" target="_blank" rel="noopener">contributors</a> for helping to make this project possible. Additional thanks to:</p>
    <p class="badges">
      <a href="https://opendevise.com" title="Development support by OpenDevise" target="_blank" rel="noopener"><img src="https://secure.gravatar.com/avatar/823717a797dbd78ceff7b26aa397f383.png?size=80" alt="OpenDevise Logo" width="30"></a>
      <a href="https://algolia.com/docsearch" title="Search by Algolia DocSearch" target="_blank" rel="noopener"><img src="../../_/img/algolia-logo.svg" alt="Algolia logo" width="30"></a>
      <a href="https://netlify.com" title="Deploys by Netlify" target="_blank" rel="noopener"><img src="https://www.netlify.com/img/global/badges/netlify-dark.svg" alt="Deploys by Netlify" width="67"></a>
    </p>
    <p>Authored in AsciiDoc.<br>Produced by <a href="https://antora.org" target="_blank" rel="noopener">Antora</a> and <a href="https://asciidoctor.org" target="_blank" rel="noopener">Asciidoctor</a>.</p>
  </div>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
